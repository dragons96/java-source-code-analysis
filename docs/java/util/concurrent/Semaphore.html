<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Java Source Code Analysis |  </title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    

    <!-- fonts -->
    <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Ubuntu:300,400,500,600,700" rel="stylesheet">

    <!-- stylesheets -->
    <link rel="stylesheet" href="/java-source-code-analysis/style/doc.css">

    <!-- favicon -->
    <link rel="icon" href="/java-source-code-analysis/favicon.ico">

    

  <meta name="generator" content="Hexo 6.2.0"></head>
  <body>

   <script>window.__INITIAL_STATE__ = {"page":{"path":"java/util/concurrent/Semaphore.html","title":""},"data":{"navigation":{"logo":{"text":"Java 源码分析","type":"link","path":"index.html"}}},"config":{"timezone":"Asia/Shanghai","root":"/java-source-code-analysis/","time_format":"HH:mm:ss","theme":"doc","theme_config":{"swagger_ui":{"version":2,"permalinks":true,"api_explorer":true,"download":"Download specification","show_extensions":false,"deep_linking":true,"display_operation_id":false,"doc_expansion":"none"},"search":{"skip":false,"background":false,"route":"/lunr.json"},"favicon":"/favicon.ico"}}}</script>

    <div id="react-navigation-root"><div class="doc-navigation" data-reactroot=""><nav class="doc-navbar"><a href="/java-source-code-analysis/index.html" class="doc-navbar__logo"><img src="/java-source-code-analysis/images/logo.png" class="doc-navbar__logo__img"/><span class="doc-navbar__logo__text">Java 源码分析</span></a><i class="dc-icon dc-icon--close dc-icon--interactive doc-sidebar-close doc-navbar__sidebar-close doc-navbar__sidebar-close--desktop"></i><i class="dc-icon dc-icon--menu dc-icon--interactive doc-sidebar-toggle doc-navbar__sidebar-toggle"></i></nav><nav class="doc-sidebar"><div class="doc-sidebar__vertical-menu"><i class="dc-icon dc-icon--menu dc-icon--interactive doc-sidebar-toggle doc-sidebar-toggle--primary doc-sidebar__vertical-menu__item"></i><i class="dc-icon dc-icon--search dc-icon--interactive doc-sidebar__vertical-menu__item doc-sidebar__vertical-menu__item--primary"></i></div><div class="doc-sidebar-content"><div class="doc-sidebar__search-form"></div><ul class="doc-sidebar-list"></ul></div></nav></div></div>
    <div class="doc-content">
  <div class="dc-page">
    <div class="dc-card">
      <div id="react-search-results-root"></div>
      <div id="page-content" class="doc-formatting">
        <h2 id="Semaphore"><a href="#Semaphore" class="headerlink" title="Semaphore"></a>Semaphore</h2><table>
<thead>
<tr>
<th align="center">类名</th>
<th align="center">类型</th>
<th align="center">父接口</th>
<th align="center">权限</th>
<th align="center">static</th>
<th align="center">final</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>java.util.concurrent.Semaphore</strong></td>
<td align="center">class</td>
<td align="center">java.io.Serializable</td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><table>
<thead>
<tr>
<th align="center">参数</th>
<th align="center">默认值</th>
<th align="center">权限</th>
<th align="center">static</th>
<th align="center">final</th>
<th align="center">volatile</th>
<th align="center">synchronized</th>
<th align="center">transient</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>serialVersionUID: long</strong></td>
<td align="center">-3222578661600680210L</td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>sync: Sync</strong></td>
<td align="center">null</td>
<td align="center">private</td>
<td align="center">否</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">All mechanics via AbstractQueuedSynchronizer subclass</td>
</tr>
</tbody></table>
<h2 id="-1"><a href="#-1" class="headerlink" title=""></a></h2><table>
<thead>
<tr>
<th align="center">方法</th>
<th align="center">权限</th>
<th align="center">static</th>
<th align="center">final</th>
<th align="center">volatile</th>
<th align="center">synchronized</th>
<th align="center">transient</th>
<th align="center">abstract</th>
<th align="left">描述</th>
<th align="left">异常</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>Semaphore(int permits)</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Creates a ‘Semaphore’ with the given number of permits and nonfair fairness setting.</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>Semaphore(int permits, boolean fair)</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Creates a ‘Semaphore’ with the given number of permits and the given fairness setting.</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>acquire(): void</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Acquires a permit from this semaphore, blocking until one is available, or the thread is ‘Thread#interrupt interrupted’.  <p>Acquires a permit, if one is available and returns immediately, reducing the number of available permits by one.  <p>If no permit is available then the current thread becomes disabled for thread scheduling purposes and lies dormant until one of two things happens: <ul> <li>Some other thread invokes the ‘#release’ method for this semaphore and the current thread is next to be assigned a permit; or <li>Some other thread ‘Thread#interrupt interrupts’ the current thread. </ul>  <p>If the current thread: <ul> <li>has its interrupted status set on entry to this method; or <li>is ‘Thread#interrupt interrupted’ while waiting for a permit, </ul> then ‘InterruptedException’ is thrown and the current thread’s interrupted status is cleared.</td>
<td align="left">InterruptedException</td>
</tr>
<tr>
<td align="center"><strong>acquireUninterruptibly(): void</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Acquires a permit from this semaphore, blocking until one is available.  <p>Acquires a permit, if one is available and returns immediately, reducing the number of available permits by one.  <p>If no permit is available then the current thread becomes disabled for thread scheduling purposes and lies dormant until some other thread invokes the ‘#release’ method for this semaphore and the current thread is next to be assigned a permit.  <p>If the current thread is ‘Thread#interrupt interrupted’ while waiting for a permit then it will continue to wait, but the time at which the thread is assigned a permit may change compared to the time it would have received the permit had no interruption occurred.  When the thread does return from this method its interrupt status will be set.</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>tryAcquire(): boolean</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Acquires a permit from this semaphore, only if one is available at the time of invocation.  <p>Acquires a permit, if one is available and returns immediately, with the value ‘true’, reducing the number of available permits by one.  <p>If no permit is available then this method will return immediately with the value ‘false’.  <p>Even when this semaphore has been set to use a fair ordering policy, a call to ‘tryAcquire()’ <em>will</em> immediately acquire a permit if one is available, whether or not other threads are currently waiting. This &quot;barging&quot; behavior can be useful in certain circumstances, even though it breaks fairness. If you want to honor the fairness setting, then use ‘#tryAcquire(long, TimeUnit) tryAcquire(0, TimeUnit.SECONDS)’ which is almost equivalent (it also detects interruption).</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>tryAcquire(long timeout, TimeUnit unit): boolean</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Acquires a permit from this semaphore, if one becomes available within the given waiting time and the current thread has not been ‘Thread#interrupt interrupted’.  <p>Acquires a permit, if one is available and returns immediately, with the value ‘true’, reducing the number of available permits by one.  <p>If no permit is available then the current thread becomes disabled for thread scheduling purposes and lies dormant until one of three things happens: <ul> <li>Some other thread invokes the ‘#release’ method for this semaphore and the current thread is next to be assigned a permit; or <li>Some other thread ‘Thread#interrupt interrupts’ the current thread; or <li>The specified waiting time elapses. </ul>  <p>If a permit is acquired then the value ‘true’ is returned.  <p>If the current thread: <ul> <li>has its interrupted status set on entry to this method; or <li>is ‘Thread#interrupt interrupted’ while waiting to acquire a permit, </ul> then ‘InterruptedException’ is thrown and the current thread’s interrupted status is cleared.  <p>If the specified waiting time elapses then the value ‘false’ is returned.  If the time is less than or equal to zero, the method will not wait at all.</td>
<td align="left">InterruptedException</td>
</tr>
<tr>
<td align="center"><strong>release(): void</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Releases a permit, returning it to the semaphore.  <p>Releases a permit, increasing the number of available permits by one.  If any threads are trying to acquire a permit, then one is selected and given the permit that was just released.  That thread is (re)enabled for thread scheduling purposes.  <p>There is no requirement that a thread that releases a permit must have acquired that permit by calling ‘#acquire’. Correct usage of a semaphore is established by programming convention in the application.</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>acquire(int permits): void</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Acquires the given number of permits from this semaphore, blocking until all are available, or the thread is ‘Thread#interrupt interrupted’.  <p>Acquires the given number of permits, if they are available, and returns immediately, reducing the number of available permits by the given amount.  <p>If insufficient permits are available then the current thread becomes disabled for thread scheduling purposes and lies dormant until one of two things happens: <ul> <li>Some other thread invokes one of the ‘#release() release’ methods for this semaphore, the current thread is next to be assigned permits and the number of available permits satisfies this request; or <li>Some other thread ‘Thread#interrupt interrupts’ the current thread. </ul>  <p>If the current thread: <ul> <li>has its interrupted status set on entry to this method; or <li>is ‘Thread#interrupt interrupted’ while waiting for a permit, </ul> then ‘InterruptedException’ is thrown and the current thread’s interrupted status is cleared. Any permits that were to be assigned to this thread are instead assigned to other threads trying to acquire permits, as if permits had been made available by a call to ‘#release()’.</td>
<td align="left">IllegalArgumentException<br/>InterruptedException</td>
</tr>
<tr>
<td align="center"><strong>acquireUninterruptibly(int permits): void</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Acquires the given number of permits from this semaphore, blocking until all are available.  <p>Acquires the given number of permits, if they are available, and returns immediately, reducing the number of available permits by the given amount.  <p>If insufficient permits are available then the current thread becomes disabled for thread scheduling purposes and lies dormant until some other thread invokes one of the ‘#release() release’ methods for this semaphore, the current thread is next to be assigned permits and the number of available permits satisfies this request.  <p>If the current thread is ‘Thread#interrupt interrupted’ while waiting for permits then it will continue to wait and its position in the queue is not affected.  When the thread does return from this method its interrupt status will be set.</td>
<td align="left">IllegalArgumentException</td>
</tr>
<tr>
<td align="center"><strong>tryAcquire(int permits): boolean</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Acquires the given number of permits from this semaphore, only if all are available at the time of invocation.  <p>Acquires the given number of permits, if they are available, and returns immediately, with the value ‘true’, reducing the number of available permits by the given amount.  <p>If insufficient permits are available then this method will return immediately with the value ‘false’ and the number of available permits is unchanged.  <p>Even when this semaphore has been set to use a fair ordering policy, a call to ‘tryAcquire’ <em>will</em> immediately acquire a permit if one is available, whether or not other threads are currently waiting.  This &quot;barging&quot; behavior can be useful in certain circumstances, even though it breaks fairness. If you want to honor the fairness setting, then use ‘#tryAcquire(int, long, TimeUnit) tryAcquire(permits, 0, TimeUnit.SECONDS)’ which is almost equivalent (it also detects interruption).</td>
<td align="left">IllegalArgumentException</td>
</tr>
<tr>
<td align="center"><strong>tryAcquire(int permits, long timeout, TimeUnit unit): boolean</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Acquires the given number of permits from this semaphore, if all become available within the given waiting time and the current thread has not been ‘Thread#interrupt interrupted’.  <p>Acquires the given number of permits, if they are available and returns immediately, with the value ‘true’, reducing the number of available permits by the given amount.  <p>If insufficient permits are available then the current thread becomes disabled for thread scheduling purposes and lies dormant until one of three things happens: <ul> <li>Some other thread invokes one of the ‘#release() release’ methods for this semaphore, the current thread is next to be assigned permits and the number of available permits satisfies this request; or <li>Some other thread ‘Thread#interrupt interrupts’ the current thread; or <li>The specified waiting time elapses. </ul>  <p>If the permits are acquired then the value ‘true’ is returned.  <p>If the current thread: <ul> <li>has its interrupted status set on entry to this method; or <li>is ‘Thread#interrupt interrupted’ while waiting to acquire the permits, </ul> then ‘InterruptedException’ is thrown and the current thread’s interrupted status is cleared. Any permits that were to be assigned to this thread, are instead assigned to other threads trying to acquire permits, as if the permits had been made available by a call to ‘#release()’.  <p>If the specified waiting time elapses then the value ‘false’ is returned.  If the time is less than or equal to zero, the method will not wait at all.  Any permits that were to be assigned to this thread, are instead assigned to other threads trying to acquire permits, as if the permits had been made available by a call to ‘#release()’.</td>
<td align="left">IllegalArgumentException<br/>InterruptedException</td>
</tr>
<tr>
<td align="center"><strong>release(int permits): void</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Releases the given number of permits, returning them to the semaphore.  <p>Releases the given number of permits, increasing the number of available permits by that amount. If any threads are trying to acquire permits, then one is selected and given the permits that were just released. If the number of available permits satisfies that thread’s request then that thread is (re)enabled for thread scheduling purposes; otherwise the thread will wait until sufficient permits are available. If there are still permits available after this thread’s request has been satisfied, then those permits are assigned in turn to other threads trying to acquire permits.  <p>There is no requirement that a thread that releases a permit must have acquired that permit by calling ‘Semaphore#acquire acquire’. Correct usage of a semaphore is established by programming convention in the application.</td>
<td align="left">IllegalArgumentException</td>
</tr>
<tr>
<td align="center"><strong>availablePermits(): int</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Returns the current number of permits available in this semaphore.  <p>This method is typically used for debugging and testing purposes.</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>drainPermits(): int</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Acquires and returns all permits that are immediately available.</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>reducePermits(int reduction): void</strong></td>
<td align="center">protected</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Shrinks the number of available permits by the indicated reduction. This method can be useful in subclasses that use semaphores to track resources that become unavailable. This method differs from ‘acquire’ in that it does not block waiting for permits to become available.</td>
<td align="left">IllegalArgumentException</td>
</tr>
<tr>
<td align="center"><strong>isFair(): boolean</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Returns ‘true’ if this semaphore has fairness set true.</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>hasQueuedThreads(): boolean</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Queries whether any threads are waiting to acquire. Note that because cancellations may occur at any time, a ‘true’ return does not guarantee that any other thread will ever acquire.  This method is designed primarily for use in monitoring of the system state.</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>getQueueLength(): int</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Returns an estimate of the number of threads waiting to acquire. The value is only an estimate because the number of threads may change dynamically while this method traverses internal data structures.  This method is designed for use in monitoring of the system state, not for synchronization control.</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>getQueuedThreads(): Collection<Thread></strong></td>
<td align="center">protected</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Returns a collection containing threads that may be waiting to acquire. Because the actual set of threads may change dynamically while constructing this result, the returned collection is only a best-effort estimate.  The elements of the returned collection are in no particular order.  This method is designed to facilitate construction of subclasses that provide more extensive monitoring facilities.</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>toString(): String</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">Returns a string identifying this semaphore, as well as its state. The state, in brackets, includes the String ‘“Permits &#x3D;”‘ followed by the number of permits.</td>
<td align="left"></td>
</tr>
</tbody></table>
<h4 id="内部类"><a href="#内部类" class="headerlink" title="内部类"></a>内部类</h4><h3 id="Semaphore-Sync"><a href="#Semaphore-Sync" class="headerlink" title="Semaphore$Sync"></a><a href="./Semaphore$Sync.html">Semaphore$Sync</a></h3><h3 id="Semaphore-NonfairSync"><a href="#Semaphore-NonfairSync" class="headerlink" title="Semaphore$NonfairSync"></a><a href="./Semaphore$NonfairSync.html">Semaphore$NonfairSync</a></h3><h3 id="Semaphore-FairSync"><a href="#Semaphore-FairSync" class="headerlink" title="Semaphore$FairSync"></a><a href="./Semaphore$FairSync.html">Semaphore$FairSync</a></h3>
        <div id="react-support-footer-root"></div>
      </div>
    </div>
  </div>
</div>

    


    

    <!-- js vendors -->
    <script src="//code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lunr.js/2.1.0/lunr.min.js"></script>

    <!-- js source  -->
    <script src="/java-source-code-analysis/script/doc.js"></script>

    

  </body>
</html>
