<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Java Source Code Analysis |  </title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    

    <!-- fonts -->
    <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Ubuntu:300,400,500,600,700" rel="stylesheet">

    <!-- stylesheets -->
    <link rel="stylesheet" href="/java-source-code-analysis/style/doc.css">

    <!-- favicon -->
    <link rel="icon" href="/java-source-code-analysis/favicon.ico">

    

  <meta name="generator" content="Hexo 6.2.0"></head>
  <body>

   <script>window.__INITIAL_STATE__ = {"page":{"path":"java/util/concurrent/Phaser.html","title":""},"data":{"navigation":{"logo":{"text":"Java 源码分析","type":"link","path":"index.html"}}},"config":{"timezone":"Asia/Shanghai","root":"/java-source-code-analysis/","time_format":"HH:mm:ss","theme":"doc","theme_config":{"swagger_ui":{"version":2,"permalinks":true,"api_explorer":true,"download":"Download specification","show_extensions":false,"deep_linking":true,"display_operation_id":false,"doc_expansion":"none"},"search":{"skip":false,"background":false,"route":"/lunr.json"},"favicon":"/favicon.ico"}}}</script>

    <div id="react-navigation-root"><div class="doc-navigation" data-reactroot=""><nav class="doc-navbar"><a href="/java-source-code-analysis/index.html" class="doc-navbar__logo"><img src="/java-source-code-analysis/images/logo.png" class="doc-navbar__logo__img"/><span class="doc-navbar__logo__text">Java 源码分析</span></a><i class="dc-icon dc-icon--close dc-icon--interactive doc-sidebar-close doc-navbar__sidebar-close doc-navbar__sidebar-close--desktop"></i><i class="dc-icon dc-icon--menu dc-icon--interactive doc-sidebar-toggle doc-navbar__sidebar-toggle"></i></nav><nav class="doc-sidebar"><div class="doc-sidebar__vertical-menu"><i class="dc-icon dc-icon--menu dc-icon--interactive doc-sidebar-toggle doc-sidebar-toggle--primary doc-sidebar__vertical-menu__item"></i><i class="dc-icon dc-icon--search dc-icon--interactive doc-sidebar__vertical-menu__item doc-sidebar__vertical-menu__item--primary"></i></div><div class="doc-sidebar-content"><div class="doc-sidebar__search-form"></div><ul class="doc-sidebar-list"></ul></div></nav></div></div>
    <div class="doc-content">
  <div class="dc-page">
    <div class="dc-card">
      <div id="react-search-results-root"></div>
      <div id="page-content" class="doc-formatting">
        <h2 id="Phaser"><a href="#Phaser" class="headerlink" title="Phaser"></a>Phaser</h2><table>
<thead>
<tr>
<th align="center">类名</th>
<th align="center">类型</th>
<th align="center">权限</th>
<th align="center">static</th>
<th align="center">final</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>java.util.concurrent.Phaser</strong></td>
<td align="center">class</td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><table>
<thead>
<tr>
<th align="center">参数</th>
<th align="center">默认值</th>
<th align="center">权限</th>
<th align="center">static</th>
<th align="center">final</th>
<th align="center">volatile</th>
<th align="center">synchronized</th>
<th align="center">transient</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>state: long</strong></td>
<td align="center">0</td>
<td align="center">private</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">主状态表示，保留四个位字段：未出错——尚未命中障碍物的参与方数量（位0-15）参与方——等待（位16-31）阶段的参与方人数——终止障碍物的生成（位32-62）——如果障碍物终止（位63&#x2F;符号）则设置，除非没有注册参与方的移相器由其他非法状态区分具有零个参与方和一个无误参与方（下面编码为空）。为了有效地保持原子性，将这些值打包到单个（原子）长文件中。良好的性能依赖于保持状态解码和编码简单，并保持竞争窗口短。除了子相位器的初始注册（即具有非空父级的子相位器），所有状态更新都通过CAS执行。在这种（相对罕见的）情况下，我们使用内置同步来锁定，同时首先向其父级注册。允许子相位器的相位滞后于其祖先的相位，直到它被实际访问为止——请参阅方法。</td>
</tr>
<tr>
<td align="center"><strong>MAX_PARTIES: int</strong></td>
<td align="center">0xffff</td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>MAX_PHASE: int</strong></td>
<td align="center">Integer.MAX_VALUE</td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>PARTIES_SHIFT: int</strong></td>
<td align="center">16</td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>PHASE_SHIFT: int</strong></td>
<td align="center">32</td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>UNARRIVED_MASK: int</strong></td>
<td align="center">0xffff</td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>PARTIES_MASK: long</strong></td>
<td align="center">0xffff0000L</td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>COUNTS_MASK: long</strong></td>
<td align="center">0xffffffffL</td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>TERMINATION_BIT: long</strong></td>
<td align="center">1L &lt;&lt; 63</td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>ONE_ARRIVAL: int</strong></td>
<td align="center">1</td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>ONE_PARTY: int</strong></td>
<td align="center">1 &lt;&lt; PARTIES_SHIFT</td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>ONE_DEREGISTER: int</strong></td>
<td align="center">ONE_ARRIVAL</td>
<td align="center">ONE_PARTY</td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">否</td>
</tr>
<tr>
<td align="center"><strong>EMPTY: int</strong></td>
<td align="center">1</td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>parent: Phaser</strong></td>
<td align="center">null</td>
<td align="center">private</td>
<td align="center">否</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">此移相器的父级，如果没有，则为空</td>
</tr>
<tr>
<td align="center"><strong>root: Phaser</strong></td>
<td align="center">null</td>
<td align="center">private</td>
<td align="center">否</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">相位树的根。如果不是在树上，等于这个。</td>
</tr>
<tr>
<td align="center"><strong>evenQ: AtomicReference&lt;QNode&gt;</strong></td>
<td align="center">null</td>
<td align="center">private</td>
<td align="center">否</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">等待线程的Treiber堆栈头。为了在释放一些线程同时添加其他线程时消除争用，我们使用了其中两个线程，在偶数和奇数阶段交替使用。子阶段与root共享队列以加快发布速度。</td>
</tr>
<tr>
<td align="center"><strong>oddQ: AtomicReference&lt;QNode&gt;</strong></td>
<td align="center">null</td>
<td align="center">private</td>
<td align="center">否</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>NCPU: int</strong></td>
<td align="center">Runtime.getRuntime().availableProcessors()</td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">用于旋转控制的CPU数</td>
</tr>
<tr>
<td align="center"><strong>SPINS_PER_ARRIVAL: int</strong></td>
<td align="center">(NCPU &lt; 2) ? 1 : 1 &lt;&lt; 8</td>
<td align="center">default</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">等待前进时阻塞前的旋转次数，以及等待时每次到达的旋转次数。在多处理器上，完全阻塞和同时唤醒大量线程通常是一个非常缓慢的过程，因此我们使用可再充电的旋转来避免线程定期到达：当一个线程在阻塞之前提前通知另一个到达，并且似乎有足够的CPU可用时，它会在阻塞之前旋转更多次spins_PER_arrival。这一价值观权衡了良好的公民身份与不必要的大幅减速。</td>
</tr>
<tr>
<td align="center"><strong>UNSAFE: sun.misc.Unsafe</strong></td>
<td align="center">null</td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">表示等待队列的Treiber堆栈的等待节点</td>
</tr>
<tr>
<td align="center"><strong>stateOffset: long</strong></td>
<td align="center">0</td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
</tr>
</tbody></table>
<h2 id="-1"><a href="#-1" class="headerlink" title=""></a></h2><table>
<thead>
<tr>
<th align="center">方法</th>
<th align="center">权限</th>
<th align="center">static</th>
<th align="center">final</th>
<th align="center">volatile</th>
<th align="center">synchronized</th>
<th align="center">transient</th>
<th align="center">abstract</th>
<th align="left">描述</th>
<th align="left">异常</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>unarrivedOf(long s): int</strong></td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>partiesOf(long s): int</strong></td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>phaseOf(long s): int</strong></td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>arrivedOf(long s): int</strong></td>
<td align="center">private</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>queueFor(int phase): AtomicReference<QNode></strong></td>
<td align="center">private</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>badArrive(long s): String</strong></td>
<td align="center">private</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">返回到达时边界异常的消息字符串。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>badRegister(long s): String</strong></td>
<td align="center">private</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">返回注册时边界异常的消息字符串。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>doArrive(int adjust): int</strong></td>
<td align="center">private</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">主要实现方法到达和到达以及注销。手动调整，以加快和最小化竞赛窗口，用于减少未出错字段的常见情况。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>doRegister(int registrations): int</strong></td>
<td align="center">private</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">寄存器、批量寄存器的实现</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>reconcileState(): long</strong></td>
<td align="center">private</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">如有必要，解决根传播的滞后相位。对账通常发生在根用户已提前但子相位器尚未提前的情况下，在这种情况下，他们必须通过将未出错设置为参与方来完成自己的提前（或者如果参与方为零，则重置为未注册的空状态）。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>Phaser()</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">创建一个新的相位器，没有初始注册方，没有父级，初始相位号为0。任何使用此相位器的线程都需要首先为其注册。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>Phaser(int parties)</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">创建一个新的相位器，该相位器具有给定数量的已注册未出错方，无父级，初始相位号为0。</td>
<td align="left">IllegalArgumentException</td>
</tr>
<tr>
<td align="center"><strong>Phaser(Phaser parent)</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">等效于“#Phaser（Phaser，int）Phaser（parent，0）”。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>Phaser(Phaser parent, int parties)</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">创建具有给定父级和已注册未出错方数的新相位器。当给定父级为非空且给定参与方数大于零时，该子相位器将向其父级注册。</td>
<td align="left">IllegalArgumentException</td>
</tr>
<tr>
<td align="center"><strong>register(): int</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">将新的未出错方添加到此移相器。如果正在进行对“#onAdvance”的调用，则此方法可能会在返回之前等待其完成。如果该移相器有一个父移相器，并且该移相者以前没有注册方，则该子移相器也将在其母移相器中注册。如果此移相器终止，则尝试注册无效，并返回负值。</td>
<td align="left">IllegalStateException</td>
</tr>
<tr>
<td align="center"><strong>bulkRegister(int parties): int</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">将给定数量的新未出错方添加到此移相器。如果正在进行对“#onAdvance”的调用，则此方法可能会在返回之前等待其完成。如果该移相器有一个父级，且给定的参与方数量大于零，且该移相者以前没有注册参与方，则该子移相器也向其父级注册。如果此移相器终止，则尝试注册无效，并返回负值。</td>
<td align="left">IllegalArgumentException<br/>IllegalStateException</td>
</tr>
<tr>
<td align="center"><strong>arrive(): int</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">到达该相位器，而不等待其他相位器到达<p> 未注册方调用此方法是一个使用错误。然而，只有在此相位器上进行某些后续操作时，此错误才可能导致“非法状态异常”。</td>
<td align="left">IllegalStateException</td>
</tr>
<tr>
<td align="center"><strong>arriveAndDeregister(): int</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">到达此移相器并从中注销，而无需等待其他移相器到达。撤销登记减少了未来阶段需要推进的缔约方数量。如果此移相器具有父级，并且取消注册导致此移相者具有零参与方，则此移相r也将从其父级取消注册<p> 未注册方调用此方法是一个使用错误。然而，只有在此相位器上进行某些后续操作时，此错误才可能导致“非法状态异常”。</td>
<td align="left">IllegalStateException</td>
</tr>
<tr>
<td align="center"><strong>arriveAndAwaitAdvance(): int</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">到达该相位器并等待其他相位器。等效于“等待提前（到达（））”。如果需要中断或超时等待，可以使用其他形式的“awaitAdvance”方法之一，通过类似的构造进行安排。如果您需要在到达时取消注册，请使用“awaitAdvance（arriveAndDeregister（））”<p> 未注册方调用此方法是一个使用错误。然而，只有在此相位器上进行某些后续操作时，此错误才可能导致“非法状态异常”。</td>
<td align="left">IllegalStateException</td>
</tr>
<tr>
<td align="center"><strong>awaitAdvance(int phase): int</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">等待该相位器的相位从给定相位值提前，如果当前相位不等于给定相位值或该相位器终止，则立即返回。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>awaitAdvanceInterruptibly(int phase): int</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">等待该相位器的相位从给定相位值提前，如果在等待期间中断，则抛出“中断异常”，或者如果当前相位不等于给定相位值或该相位器终止，则立即返回。</td>
<td align="left">InterruptedException</td>
</tr>
<tr>
<td align="center"><strong>awaitAdvanceInterruptibly(int phase, long timeout, TimeUnit unit): int</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">等待该移相器的相位从给定相位值提前或经过给定超时，如果在等待时中断，则抛出“中断异常”，如果当前相位不等于给定相位值或该移相仪终止，则立即返回。</td>
<td align="left">InterruptedException<br/>TimeoutException</td>
</tr>
<tr>
<td align="center"><strong>forceTermination(): void</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">强制该移相器进入终止状态。注册方的数量不受影响。如果该相位器是一组分层相位器的成员，则该组中的所有相位器都将终止。如果此移相器已终止，则此方法无效。在一个或多个任务遇到意外异常后，此方法可能有助于协调恢复。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>getPhase(): int</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center"><strong><font color='red'>是</font></strong></td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">返回当前相位号。最大相位数为“整数”。MAX_VALUE’，之后它重新开始为零。终止时，相位号为负，在这种情况下，终止前的主导相位可通过“getPhase（）+Integer.MIN_VALUE”获得。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>getRegisteredParties(): int</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">返回在此相位器上注册的参与方数。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>getArrivedParties(): int</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">返回已到达此移相器当前阶段的注册参与方数。如果此移相器已终止，则返回值无意义且任意。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>getUnarrivedParties(): int</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">返回尚未到达此移相器当前阶段的注册方数。如果此移相器已终止，则返回值无意义且任意。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>getParent(): Phaser</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">返回此移相器的父级，如果没有，则返回“null”。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>getRoot(): Phaser</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">返回此相位器的根祖先，如果没有父级，则与此相位器相同。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>isTerminated(): boolean</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">如果此移相器已终止，则返回“true”。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>onAdvance(int phase, int registeredParties): boolean</strong></td>
<td align="center">protected</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">在即将到来的阶段提前时执行操作并控制终止的可重写方法。此方法在推进此移相器的一方到达时调用（当所有其他等待方处于休眠状态时）。如果此方法返回“true”，则此移相器将预先设置为最终终止状态，随后对“#isTerminated”的调用将返回true。调用此方法引发的任何（未经检查的）异常或错误都会传播给试图推进此移相器的一方，在这种情况下，不会发生任何推进<p> 该方法的参数提供了当前转换中占主导地位的移相器状态。从“onAdvance”中调用此相位器上的到达、注册和等待方法的效果未指定，不应依赖。<p>如果此相位器是一组分层相位器的成员，则仅在每次提前时为其根相位器调用“OnAdvence”<p> 为了支持最常见的用例，当一方调用“arriveAndDeregister”导致注册方的数量变为零时，该方法的默认实现返回“true”。您可以禁用此行为，从而在将来注册时启用继续，方法是重写此方法以始终返回“false”：＜pre＞“Phaser-Phaser&#x3D;new-Phaser（）｛protected boolean-onAdvance（int-phase，int-parties）｛return-false；‘｝｝</pre></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>toString(): String</strong></td>
<td align="center">public</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">返回标识此移相器及其状态的字符串。括号中的状态包括字符串“phase&#x3D;”和“parties&#x3D;”后接阶段号，“parties&#x3D;”，后接注册方数，“arrized&#x3D;”和到达方数。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>stateToString(long s): String</strong></td>
<td align="center">private</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">toString和基于字符串的错误消息的实现</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>releaseWaiters(int phase): void</strong></td>
<td align="center">private</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">从队列中移除线程并发出信号以进行阶段。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>abortWait(int phase): int</strong></td>
<td align="center">private</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">releaseWaiters的一种变体，它还尝试删除由于超时或中断而不再等待advance的任何节点。目前，只有当节点位于队列的最前面时，才会删除节点，这在大多数情况下足以减少内存占用。</td>
<td align="left"></td>
</tr>
<tr>
<td align="center"><strong>internalAwaitAdvance(int phase, QNode node): int</strong></td>
<td align="center">private</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="center">否</td>
<td align="left">可能阻塞并等待相位前进，除非中止。只调用根移相器。</td>
<td align="left"></td>
</tr>
</tbody></table>
<h4 id="内部类"><a href="#内部类" class="headerlink" title="内部类"></a>内部类</h4><h3 id="Phaser-QNode"><a href="#Phaser-QNode" class="headerlink" title="Phaser$QNode"></a><a href="./Phaser$QNode.html">Phaser$QNode</a></h3>
        <div id="react-support-footer-root"></div>
      </div>
    </div>
  </div>
</div>

    


    

    <!-- js vendors -->
    <script src="//code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lunr.js/2.1.0/lunr.min.js"></script>

    <!-- js source  -->
    <script src="/java-source-code-analysis/script/doc.js"></script>

    

  </body>
</html>
